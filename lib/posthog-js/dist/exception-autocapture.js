!function(){"use strict";function e(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function r(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(e){n(r,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var t="undefined"!=typeof window?window:void 0,o="undefined"!=typeof globalThis?globalThis:t,i=null==o?void 0:o.navigator;null==o||o.document,null==o||o.location,null==o||o.fetch,null!=o&&o.XMLHttpRequest&&"withCredentials"in new o.XMLHttpRequest&&o.XMLHttpRequest,null==o||o.AbortController,null==i||i.userAgent;var a,c=null!=t?t:{};!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(a||(a={}));var l=["fatal","error","warning","log","info","debug"],u=Array.isArray,s=Object.prototype.toString,d=u||function(e){return"[object Array]"===s.call(e)},v=e=>"function"==typeof e,f=e=>e===Object(e)&&!d(e),p=e=>void 0===e,g=e=>"[object String]"==s.call(e),h=e=>g(e)&&0===e.trim().length,y=e=>null===e;function E(e){return!p(Event)&&x(e,Event)}function x(e,r){try{return e instanceof r}catch(e){return!1}}function _(e){return y(e)||!f(e)&&!v(e)}function O(e,r){return Object.prototype.toString.call(e)==="[object ".concat(r,"]")}function b(e){return O(e,"DOMError")}var w=/\(error: (.*)\)/,j=50,m="?";function M(e,r,n,t){var o={platform:"web:javascript",filename:e,function:"<anonymous>"===r?m:r,in_app:!0};return p(n)||(o.lineno=n),p(t)||(o.colno=t),o}var T=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,S=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,P=/\((\S*)(?::(\d+))(?::(\d+))\)/,D=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,A=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,R=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=n.sort(((e,r)=>e[0]-r[0])).map((e=>e[1]));return function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],i=e.split("\n"),a=n;a<i.length;a++){var c=i[a];if(!(c.length>1024)){var l=w.test(c)?c.replace(w,"$1"):c;if(!l.match(/\S*Error: /)){for(var u of o){var s=u(l);if(s){t.push(s);break}}if(t.length>=j)break}}}return function(e){if(!e.length)return[];var n=Array.from(e);return n.reverse(),n.slice(0,j).map((e=>r(r({},e),{},{filename:e.filename||$(n).filename,function:e.function||m})))}(t)}}(...[[30,e=>{var r=T.exec(e);if(r){var[,n,t,o]=r;return M(n,m,+t,+o)}var i=S.exec(e);if(i){if(i[2]&&0===i[2].indexOf("eval")){var a=P.exec(i[2]);a&&(i[2]=a[1],i[3]=a[2],i[4]=a[3])}var[c,l]=k(i[1]||m,i[2]);return M(l,c,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}}],[50,e=>{var r=D.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){var n=A.exec(r[3]);n&&(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]="")}var t=r[3],o=r[1]||m;return[o,t]=k(o,t),M(t,o,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}}]]);function $(e){return e[e.length-1]||{}}var k=(e,r)=>{var n=-1!==e.indexOf("safari-extension"),t=-1!==e.indexOf("safari-web-extension");return n||t?[-1!==e.indexOf("@")?e.split("@")[0]:m,n?"safari-extension:".concat(r):"safari-web-extension:".concat(r)]:[e,r]},U=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function H(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.stacktrace||e.stack||"",t=function(e){if(e&&N.test(e.message))return 1;return 0}(e);try{var o=R(n,t);return o.slice(0,o.length-r)}catch(e){}return[]}var N=/Minified React error #\d+;/i;function G(e,r){var n,t,o=H(e),i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null!==(t=null==r?void 0:r.synthetic)&&void 0!==t&&t;return{$exception_list:[{type:null!=r&&r.overrideExceptionType?r.overrideExceptionType:e.name,value:null!=r&&r.overrideExceptionMessage?r.overrideExceptionMessage:function(e){var r=e.message;if(r.error&&"string"==typeof r.error.message)return r.error.message;return r}(e),stacktrace:{frames:o,type:"raw"},mechanism:{handled:i,synthetic:a}}],$exception_level:"error"}}function I(e,r){var n,t,o,i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null===(t=null==r?void 0:r.synthetic)||void 0===t||t,c={type:null!=r&&r.overrideExceptionType?r.overrideExceptionType:null!==(o=null==r?void 0:r.defaultExceptionType)&&void 0!==o?o:"Error",value:null!=r&&r.overrideExceptionMessage?r.overrideExceptionMessage:e||(null==r?void 0:r.defaultExceptionMessage),mechanism:{handled:i,synthetic:a}};if(null!=r&&r.syntheticException){var l=H(r.syntheticException,1);l.length&&(c.stacktrace={frames:l,type:"raw"})}return{$exception_list:[c],$exception_level:"error"}}function z(e,r){var n,t,o,i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null===(t=null==r?void 0:r.synthetic)||void 0===t||t,c=null!=r&&r.overrideExceptionType?r.overrideExceptionType:E(e)?e.constructor.name:"Error",u=null!=r&&r.overrideExceptionMessage?r.overrideExceptionMessage:"Non-Error ".concat("exception"," captured with keys: ",function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=Object.keys(e);if(n.sort(),!n.length)return"[object has no keys]";for(var t=n.length;t>0;t--){var o=n.slice(0,t).join(", ");if(!(o.length>r))return t===n.length||o.length<=r?o:"".concat(o.slice(0,r),"...")}return""}(e)),s={type:c,value:u,mechanism:{handled:i,synthetic:a}};if(null!=r&&r.syntheticException){var d=H(null==r?void 0:r.syntheticException,1);d.length&&(s.stacktrace={frames:d,type:"raw"})}return{$exception_list:[s],$exception_level:(o=e.level,g(o)&&!h(o)&&l.indexOf(o)>=0?e.level:"error")}}function L(e,n){var[t,o,i,a,c]=e,l={$exception_list:[]},u=c||t;if(b(u)||function(e){return O(e,"DOMException")}(u)){var s=u;if(function(e){return"stack"in e}(u))l=G(u,n);else{var d=s.name||(b(s)?"DOMError":"DOMException"),v=s.message?"".concat(d,": ").concat(s.message):d,f=b(s)?"DOMError":"DOMException";l=I(v,r(r({},n),{},{overrideExceptionType:f,defaultExceptionMessage:v}))}return"code"in s&&(l.$exception_DOMException_code="".concat(s.code)),l}if(function(e){return O(e,"ErrorEvent")}(u)&&u.error)return G(u.error,n);if(function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return x(e,Error)}}(u))return G(u,n);if(function(e){return O(e,"Object")}(u)||E(u))return z(u,n);if(p(c)&&g(t)){var h="Error",y=t,_=t.match(U);return _&&(h=_[1],y=_[2]),I(y,r(r({},n),{},{overrideExceptionType:h,defaultExceptionMessage:y}))}return I(u,n)}function q(e){var[r]=e,n=function(e){if(_(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(r);return _(n)?I("Non-Error promise rejection captured with value: ".concat(String(n)),{handled:!1,synthetic:!1,overrideExceptionType:"UnhandledRejection"}):L([n],{handled:!1,overrideExceptionType:"UnhandledRejection",defaultExceptionMessage:String(n)})}var W=e=>{var r={_log:function(r){if(t&&c.POSTHOG_DEBUG&&!p(t.console)&&t.console){for(var n=("__rrweb_original__"in t.console[r]?t.console[r].__rrweb_original__:t.console[r]),o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];n(e,...i)}},info:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("log",...n)},warn:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("warn",...n)},error:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("error",...n)},critical:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];console.error(e,...n)},uninitializedWarning:e=>{r.error("You must initialize PostHog before calling ".concat(e))},createLogger:r=>W("".concat(e," ").concat(r))};return r},X=(0,W("[PostHog.js]").createLogger)("[ExceptionAutocapture]"),B={wrapOnError:e=>{var r=t;r||X.info("window not available, cannot wrap onerror");var n=r.onerror;return r.onerror=function(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=L(o);return e(a),null!==(r=null==n?void 0:n(...o))&&void 0!==r&&r},r.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var e;null===(e=r.onerror)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,r.onerror=n}},wrapUnhandledRejection:e=>{var r=t;r||X.info("window not available, cannot wrap onUnhandledRejection");var n=r.onunhandledrejection;return r.onunhandledrejection=function(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=q(i);return e(c),null!==(t=null==n?void 0:n.apply(r,i))&&void 0!==t&&t},r.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var e;null===(e=r.onunhandledrejection)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,r.onunhandledrejection=n}}};c.__PosthogExtensions__=c.__PosthogExtensions__||{},c.__PosthogExtensions__.errorWrappingFunctions=B,c.__PosthogExtensions__.parseErrorAsProperties=L,c.posthogErrorWrappingFunctions=B,c.parseErrorAsProperties=L}();
//# sourceMappingURL=exception-autocapture.js.map
